<div class="gamification-header">
  <button class="back-btn" routerLink="/gamificacion">â¬… Volver</button>
  <h2>AquaCards</h2>

  <div class="sound-control" [class.volume-visible]="showVolume">
    <span class="sound-icon" [class.muted]="muted" (click)="toggleVolumeVisibility()">
      ğŸ”Š
    </span>

    <div class="volume-slider" [class.visible]="showVolume">
      <input type="range" min="0" max="100" [(ngModel)]="volume" (input)="updateVolume()" />
    </div>
  </div>
</div>

<div class="memory-layout">
  <div class="memory-info">

    <div *ngIf="!gameStarted" class="start-panel">
      <p>Â¡DescubrÃ­ consejos de ahorro de agua jugando al Memory Test de AquaVision!</p>
      <button class="start-btn" (click)="startGame()">ğŸ’§ Comenzar juego</button>
    </div>

    <div *ngIf="gameStarted">
      <h3>Mis Aprendizajes</h3>

      <div *ngFor="let icon of icons">
        <div class="info-card" [class.unlocked]="infoTexts[icon].matched">
          <h4>{{ infoTexts[icon].title }}</h4>
          <div *ngIf="infoTexts[icon].matched">
            <p>{{ infoTexts[icon].detail }}</p>
            <button *ngIf="!infoTexts[icon].claimed" (click)="markAsRead(icon)">
              âœ… Entendido
            </button>
          </div>
          <div *ngIf="!infoTexts[icon].matched" class="locked">
            ğŸ”’ Esperando coincidencia...
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="memory-board-wrapper">
    <div class="memory-board">
      <div class="card" *ngFor="let card of cards" (click)="flipCard(card)" [class.disabled]="!gameStarted">
        <div class="card-inner" [class.flipped]="card.flipped || card.matched">
          <div class="card-front">â“</div>
          <div class="card-back">{{ card.icon }}</div>
        </div>
      </div>
    </div>


<div class="scene-card current-info below-cards">
  <div class="scene-info left-align">
    <h4>EstadÃ­sticas generales</h4>
    <p><strong>Matcheos restantes:</strong> {{ remainingMatches }}</p>
    <p>
      <strong>Ãšltima obtenciÃ³n:</strong>
      {{ lastClaimDate ? (lastClaimDate | date:'dd/MM/yyyy - HH:mm') : 'AÃºn no reclamaste puntos' }}
    </p>
    <button
      class="claim-btn"
      [class.claimed]="alreadyClaimed"
      (click)="claimAllPoints()"
      [disabled]="alreadyClaimed || !allRead()"
    >
      {{
        alreadyClaimed
          ? 'Ya reclamaste los puntos diarios. VolvÃ© maÃ±ana para reclamar mÃ¡s.'
          : (allRead()
              ? 'Reclamar puntos'
              : 'CompletÃ¡ todos los pares para reclamar.')
      }}
    </button>
  </div>
</div>
  </div>
</div>